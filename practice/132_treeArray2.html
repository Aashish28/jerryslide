<html>
<script>
/*n = 5， l(5) = 1, 所以c[5]即为a[5],
var l = lowerbit(n);
var result = a[l];
while (l > 1) {
  result += a[l];
  l--
} */

function lowbit(x) { 
	return x & (-x); 
}


/*
0: 0 
1: 1 C1 = A1 = 1
2: 3 C2 = A1 + A2 = 1 + 2 = 3
3: 1 C3 = A3 = 3
4: 10 C4 = A1 + A2 + A3 + A4 = 1 + 2 + 3 + 4 = 10
5: 1 C5 = A5 = 5
6: 3 C6 = A5 + A6 = 5 + 6 = 11
*/

var SUM = [0];
var raw = [0,1,2,3,4,5,6,7,8];

function getSum(index){
  var ans = raw[index];
  var indexBackup = index;
  var n = lowbit(index);
  while( n > 1 ) {
  	indexBackup--;
  	ans = ans + raw[indexBackup];
    n = n - lowbit(n);
  }
 
  return ans;
}

/*for( var i = 1 ; i < raw.length; i++){
	console.log("C[" + i + "]:" + getSum(i));
}*/
console.log(getSum(8));
/*
  1 A1 = 1
  3 A1 + A2 = 1 + 2 = 3
  3 A3 = 3
  7 A3 + A4 = 3 + 4 = 7
  5 A5 = 5
  11 A5 + A6 = 5 + 6 = 11
  7  A7 = 7,
  36 A1 + A2 + A3 + A4 .. + A8 = 1 + 2 + 3 + 4 .. + 8 

*/
</script>
</html>